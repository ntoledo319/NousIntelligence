{% extends "base.html" %}

{% block title %}Practice Vocabulary | {{ profile.language_name }} | NOUS{% endblock %}

{% block styles %}
<style>
    .flashcard-container {
        perspective: 1000px;
        height: 300px;
        width: 100%;
        max-width: 600px;
        margin: 0 auto;
    }
    .flashcard {
        width: 100%;
        height: 100%;
        position: relative;
        transform-style: preserve-3d;
        transition: transform 0.8s;
        cursor: pointer;
    }
    .flashcard.flipped {
        transform: rotateY(180deg);
    }
    .flashcard-front, .flashcard-back {
        position: absolute;
        width: 100%;
        height: 100%;
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        border-radius: 15px;
        padding: 20px;
    }
    .flashcard-front {
        background-color: #f8f9fa;
        border: 1px solid #dee2e6;
    }
    .flashcard-back {
        background-color: #e9ecef;
        border: 1px solid #dee2e6;
        transform: rotateY(180deg);
    }
    .flashcard-word {
        font-size: 2.5rem;
        margin-bottom: 1rem;
    }
    .flashcard-hint {
        color: #6c757d;
        font-style: italic;
    }
    .flashcard-pronunciation {
        margin-top: 1rem;
        padding: 0.5rem 1rem;
        background-color: #f8f9fa;
        border-radius: 20px;
        font-style: italic;
    }
    .feedback-btn {
        transform: scale(1);
        transition: transform 0.2s;
    }
    .feedback-btn:hover {
        transform: scale(1.1);
    }
    .session-progress {
        height: 8px;
    }
    .mastery-progress {
        height: 10px;
    }
    .practice-header {
        border-bottom: 1px solid #dee2e6;
        padding-bottom: 1rem;
        margin-bottom: 1.5rem;
    }
    .practice-footer {
        border-top: 1px solid #dee2e6;
        padding-top: 1rem;
        margin-top: 1.5rem;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .fade-in {
        animation: fadeIn 0.5s;
    }
    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
    }
    .pulse {
        animation: pulse 2s infinite;
    }
</style>
{% endblock %}

{% block content %}
<div class="container my-4">
    <div class="row mb-4">
        <div class="col-12">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{{ url_for('language.index') }}">Language Learning</a></li>
                    <li class="breadcrumb-item"><a href="{{ url_for('language.profile', profile_id=profile.profile.id) }}">{{ profile.language_name }}</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Vocabulary Practice</li>
                </ol>
            </nav>
            
            <div class="practice-header d-flex justify-content-between align-items-center">
                <div>
                    <h1 class="mb-0">{{ profile.language_name }} Vocabulary Practice</h1>
                    <p class="text-muted">Click on cards to flip and test your knowledge</p>
                </div>
                <div>
                    <div class="btn-group">
                        <button class="btn btn-outline-secondary active" id="targetToNativeBtn" data-direction="target-to-native">
                            {{ profile.language_name }} → {{ profile.native_language_name }}
                        </button>
                        <button class="btn btn-outline-secondary" id="nativeToTargetBtn" data-direction="native-to-target">
                            {{ profile.native_language_name }} → {{ profile.language_name }}
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="alert alert-info d-flex align-items-center" role="alert">
                <i class="fas fa-info-circle me-2"></i>
                <div>
                    You have <strong>{{ review_items|length }}</strong> vocabulary items to review today.
                </div>
            </div>
        </div>
    </div>
    
    <!-- Session Progress -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col-md-3 text-center">
                            <h5>Progress</h5>
                            <div class="display-4" id="progressCounter">0/{{ review_items|length }}</div>
                        </div>
                        <div class="col-md-9">
                            <h5>Session Progress</h5>
                            <div class="progress session-progress mb-2">
                                <div class="progress-bar bg-primary" role="progressbar" style="width: 0%" id="sessionProgress"></div>
                            </div>
                            
                            <div class="d-flex justify-content-between text-muted small">
                                <div id="timeElapsed">Time: 00:00</div>
                                <div>Difficulty: <span class="badge bg-warning">{{ profile.profile.proficiency_level|title }}</span></div>
                                <div id="accuracyDisplay">Accuracy: 0%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Flashcard Area -->
    <div class="row mb-4">
        <div class="col-md-10 mx-auto">
            <div class="flashcard-container">
                <div class="flashcard shadow" id="currentFlashcard">
                    <div class="flashcard-front">
                        <div class="flashcard-word" id="frontWord"></div>
                        <div class="flashcard-hint" id="frontHint"></div>
                        <button class="btn btn-sm btn-outline-primary mt-3" id="frontPronounceBtn">
                            <i class="fas fa-volume-up"></i> Pronounce
                        </button>
                    </div>
                    <div class="flashcard-back">
                        <div class="flashcard-word" id="backWord"></div>
                        <div class="flashcard-pronunciation" id="pronunciation"></div>
                        <button class="btn btn-sm btn-outline-primary mt-3" id="backPronounceBtn">
                            <i class="fas fa-volume-up"></i> Pronounce
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-3">
                <p class="text-muted">Tap or click the card to flip</p>
            </div>
        </div>
    </div>
    
    <!-- Feedback Buttons -->
    <div class="row mb-4">
        <div class="col-12 text-center">
            <h5 class="mb-3">Did you know this word?</h5>
            <div>
                <button class="btn btn-lg btn-outline-danger me-3 feedback-btn" id="didntKnowBtn">
                    <i class="fas fa-times fa-lg"></i>
                    <div>Didn't Know</div>
                </button>
                
                <button class="btn btn-lg btn-outline-warning me-3 feedback-btn" id="hardBtn">
                    <i class="fas fa-question fa-lg"></i>
                    <div>Hard</div>
                </button>
                
                <button class="btn btn-lg btn-outline-success feedback-btn" id="knewItBtn">
                    <i class="fas fa-check fa-lg"></i>
                    <div>Knew It</div>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Additional Actions -->
    <div class="practice-footer">
        <div class="row">
            <div class="col-md-4">
                <button class="btn btn-secondary" id="skipBtn">
                    <i class="fas fa-forward"></i> Skip Word
                </button>
            </div>
            <div class="col-md-4 text-center">
                <div class="dropdown">
                    <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="practiceOptionsBtn" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fas fa-cog"></i> Options
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="practiceOptionsBtn">
                        <li><a class="dropdown-item" href="#" id="shuffleBtn"><i class="fas fa-random"></i> Shuffle Words</a></li>
                        <li><a class="dropdown-item" href="#" id="filterBeginnerBtn"><i class="fas fa-filter"></i> New Words Only</a></li>
                        <li><a class="dropdown-item" href="#" id="filterAllBtn"><i class="fas fa-globe"></i> All Words</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#" id="toggleHintsBtn"><i class="fas fa-lightbulb"></i> Toggle Hints</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-md-4 text-end">
                <button class="btn btn-primary" id="endSessionBtn">
                    <i class="fas fa-check-circle"></i> End Session
                </button>
            </div>
        </div>
    </div>
    
    <!-- Session Summary Modal -->
    <div class="modal fade" id="sessionSummaryModal" tabindex="-1" aria-labelledby="sessionSummaryModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="sessionSummaryModalLabel">Practice Session Complete!</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-4">
                        <i class="fas fa-trophy fa-3x text-warning mb-3"></i>
                        <h4>Great job on your {{ profile.language_name }} practice!</h4>
                    </div>
                    
                    <div class="row mb-4">
                        <div class="col-md-4 text-center">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">Time Spent</h5>
                                    <div class="display-4 mb-2" id="summaryTime">00:00</div>
                                    <p class="text-muted">minutes studying</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 text-center">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">Words Reviewed</h5>
                                    <div class="display-4 mb-2" id="summaryWords">0</div>
                                    <p class="text-muted">vocabulary items</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 text-center">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">Accuracy</h5>
                                    <div class="display-4 mb-2" id="summaryAccuracy">0%</div>
                                    <p class="text-muted">correct responses</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row mb-4">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Words to Review More</h5>
                                </div>
                                <div class="card-body">
                                    <div id="difficultWords">
                                        <div class="text-center py-3">
                                            <p class="text-muted">You got all words right! Great job!</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Your Progress</h5>
                        </div>
                        <div class="card-body">
                            <p>Vocabulary Mastery</p>
                            <div class="progress mastery-progress mb-2">
                                <div class="progress-bar bg-danger" role="progressbar" style="width: 10%" id="beginnerProgress"></div>
                                <div class="progress-bar bg-warning" role="progressbar" style="width: 30%" id="learningProgress"></div>
                                <div class="progress-bar bg-success" role="progressbar" style="width: 60%" id="masteredProgress"></div>
                            </div>
                            <div class="d-flex justify-content-between mt-2">
                                <span><small><i class="fas fa-circle text-danger"></i> New</small></span>
                                <span><small><i class="fas fa-circle text-warning"></i> Learning</small></span>
                                <span><small><i class="fas fa-circle text-success"></i> Mastered</small></span>
                            </div>
                            
                            <div class="mt-3">
                                <p id="streakMessage">You're on a 3-day streak! Keep it up!</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="{{ url_for('language.vocabulary', profile_id=profile.profile.id) }}" class="btn btn-outline-secondary me-2">
                        <i class="fas fa-list"></i> View All Vocabulary
                    </a>
                    <a href="{{ url_for('language.practice_dashboard', profile_id=profile.profile.id) }}" class="btn btn-outline-primary me-2">
                        <i class="fas fa-th"></i> Practice Dashboard
                    </a>
                    <a href="{{ url_for('language.practice_vocabulary', profile_id=profile.profile.id) }}" class="btn btn-success">
                        <i class="fas fa-redo"></i> Practice Again
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Session state
        const sessionState = {
            startTime: new Date(),
            wordsReviewed: 0,
            correctCount: 0,
            hardCount: 0,
            incorrectCount: 0,
            currentIndex: 0,
            showingFront: true,
            practiceDirection: 'target-to-native', // Start with target language to native
            showHints: true,
            difficultWords: [],
            sessionId: '{{ session.get("current_learning_session", {}).get("id") }}'
        };
        
        // Get vocabulary items from the server
        let vocabularyItems = [
            {% for item in review_items %}
                {
                    id: {{ item.id }},
                    word: "{{ item.word }}",
                    translation: "{{ item.translation }}",
                    pronunciation: "{{ item.pronunciation or '' }}",
                    partOfSpeech: "{{ item.part_of_speech or '' }}",
                    mastery: {{ item.mastery_level }}
                },
            {% endfor %}
        ];
        
        // If no vocabulary items, add a default one
        if (vocabularyItems.length === 0) {
            vocabularyItems = [
                {
                    id: 0,
                    word: "No vocabulary items available",
                    translation: "Add some words to practice",
                    pronunciation: "",
                    partOfSpeech: "",
                    mastery: 0
                }
            ];
        }
        
        // Sort by mastery (lowest first)
        vocabularyItems.sort((a, b) => a.mastery - b.mastery);
        
        // Get elements
        const flashcard = document.getElementById('currentFlashcard');
        const frontWord = document.getElementById('frontWord');
        const backWord = document.getElementById('backWord');
        const frontHint = document.getElementById('frontHint');
        const pronunciation = document.getElementById('pronunciation');
        const progressCounter = document.getElementById('progressCounter');
        const sessionProgress = document.getElementById('sessionProgress');
        const timeElapsed = document.getElementById('timeElapsed');
        const accuracyDisplay = document.getElementById('accuracyDisplay');
        
        // Direction buttons
        const targetToNativeBtn = document.getElementById('targetToNativeBtn');
        const nativeToTargetBtn = document.getElementById('nativeToTargetBtn');
        
        // Feedback buttons
        const didntKnowBtn = document.getElementById('didntKnowBtn');
        const hardBtn = document.getElementById('hardBtn');
        const knewItBtn = document.getElementById('knewItBtn');
        
        // Action buttons
        const skipBtn = document.getElementById('skipBtn');
        const endSessionBtn = document.getElementById('endSessionBtn');
        const shuffleBtn = document.getElementById('shuffleBtn');
        const filterBeginnerBtn = document.getElementById('filterBeginnerBtn');
        const filterAllBtn = document.getElementById('filterAllBtn');
        const toggleHintsBtn = document.getElementById('toggleHintsBtn');
        
        // Pronunciation buttons
        const frontPronounceBtn = document.getElementById('frontPronounceBtn');
        const backPronounceBtn = document.getElementById('backPronounceBtn');
        
        // Timer interval
        let timerInterval;
        
        // Initialize the session
        function initSession() {
            updateFlashcard();
            updateProgress();
            startTimer();
            
            // Disable feedback buttons until card is flipped
            disableFeedbackButtons();
        }
        
        // Update flashcard content based on current index and direction
        function updateFlashcard() {
            const item = vocabularyItems[sessionState.currentIndex];
            sessionState.showingFront = true;
            flashcard.classList.remove('flipped');
            
            if (sessionState.practiceDirection === 'target-to-native') {
                // Show target language on front, native on back
                frontWord.textContent = item.word;
                backWord.textContent = item.translation;
                frontHint.textContent = item.partOfSpeech ? item.partOfSpeech : '';
            } else {
                // Show native language on front, target on back
                frontWord.textContent = item.translation;
                backWord.textContent = item.word;
                frontHint.textContent = '';
            }
            
            // Update pronunciation
            pronunciation.textContent = item.pronunciation ? item.pronunciation : '';
            
            // Handle hints visibility
            if (!sessionState.showHints) {
                frontHint.style.display = 'none';
            } else {
                frontHint.style.display = 'block';
            }
            
            // Add animation
            flashcard.classList.add('fade-in');
            setTimeout(() => {
                flashcard.classList.remove('fade-in');
            }, 500);
            
            // Disable feedback buttons until card is flipped
            disableFeedbackButtons();
        }
        
        // Update progress indicators
        function updateProgress() {
            progressCounter.textContent = `${sessionState.wordsReviewed}/${vocabularyItems.length}`;
            
            const progressPercentage = (sessionState.wordsReviewed / vocabularyItems.length) * 100;
            sessionProgress.style.width = `${progressPercentage}%`;
            
            const accuracy = sessionState.wordsReviewed > 0 ? 
                Math.round((sessionState.correctCount / sessionState.wordsReviewed) * 100) : 0;
            accuracyDisplay.textContent = `Accuracy: ${accuracy}%`;
        }
        
        // Start session timer
        function startTimer() {
            timerInterval = setInterval(updateTimer, 1000);
        }
        
        // Update timer display
        function updateTimer() {
            const now = new Date();
            const elapsedMs = now - sessionState.startTime;
            const minutes = Math.floor(elapsedMs / 60000);
            const seconds = Math.floor((elapsedMs % 60000) / 1000);
            
            timeElapsed.textContent = `Time: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // Move to next card
        function nextCard() {
            sessionState.wordsReviewed++;
            
            if (sessionState.currentIndex < vocabularyItems.length - 1) {
                sessionState.currentIndex++;
                updateFlashcard();
            } else {
                endSession();
            }
            
            updateProgress();
        }
        
        // Handle card feedback
        function recordFeedback(type) {
            const item = vocabularyItems[sessionState.currentIndex];
            
            if (type === 'correct') {
                sessionState.correctCount++;
            } else if (type === 'hard') {
                sessionState.hardCount++;
                sessionState.difficultWords.push(item);
            } else {
                sessionState.incorrectCount++;
                sessionState.difficultWords.push(item);
            }
            
            // Send feedback to server (this would be an API call)
            const correct = type === 'correct';
            
            console.log(`Updating vocabulary item ${item.id} with feedback: ${type}`);
            
            // In a real implementation, this would call an API endpoint
            // to update the vocabulary item's mastery level
            
            nextCard();
        }
        
        // End practice session
        function endSession() {
            // Clear timer
            clearInterval(timerInterval);
            
            // Calculate session stats
            const now = new Date();
            const elapsedMs = now - sessionState.startTime;
            const minutes = Math.floor(elapsedMs / 60000);
            const seconds = Math.floor((elapsedMs % 60000) / 1000);
            const timeStr = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            const accuracy = sessionState.wordsReviewed > 0 ? 
                Math.round((sessionState.correctCount / sessionState.wordsReviewed) * 100) : 0;
            
            // Update summary modal
            document.getElementById('summaryTime').textContent = timeStr;
            document.getElementById('summaryWords').textContent = sessionState.wordsReviewed;
            document.getElementById('summaryAccuracy').textContent = `${accuracy}%`;
            
            // Update difficult words list
            const difficultWordsContainer = document.getElementById('difficultWords');
            if (sessionState.difficultWords.length > 0) {
                let html = '<div class="list-group">';
                sessionState.difficultWords.forEach(item => {
                    html += `
                        <div class="list-group-item">
                            <div class="d-flex w-100 justify-content-between">
                                <h6>${item.word}</h6>
                                <span>${item.translation}</span>
                            </div>
                            ${item.pronunciation ? `<small class="text-muted">${item.pronunciation}</small>` : ''}
                        </div>
                    `;
                });
                html += '</div>';
                difficultWordsContainer.innerHTML = html;
            } else {
                difficultWordsContainer.innerHTML = '<div class="text-center py-3"><p class="text-muted">You got all words right! Great job!</p></div>';
            }
            
            // Update mastery progress
            const beginnerCount = vocabularyItems.filter(i => i.mastery < 0.3).length;
            const learningCount = vocabularyItems.filter(i => i.mastery >= 0.3 && i.mastery < 0.7).length;
            const masteredCount = vocabularyItems.filter(i => i.mastery >= 0.7).length;
            
            const total = vocabularyItems.length;
            
            document.getElementById('beginnerProgress').style.width = `${(beginnerCount / total) * 100}%`;
            document.getElementById('learningProgress').style.width = `${(learningCount / total) * 100}%`;
            document.getElementById('masteredProgress').style.width = `${(masteredCount / total) * 100}%`;
            
            // Complete session on server (this would be an API call)
            console.log(`Completing session ${sessionState.sessionId} with stats:`, {
                duration_minutes: minutes,
                items_covered: sessionState.wordsReviewed,
                success_rate: accuracy,
                score: accuracy
            });
            
            // Show summary modal
            const modal = new bootstrap.Modal(document.getElementById('sessionSummaryModal'));
            modal.show();
        }
        
        // Disable feedback buttons
        function disableFeedbackButtons() {
            didntKnowBtn.disabled = true;
            hardBtn.disabled = true;
            knewItBtn.disabled = true;
        }
        
        // Enable feedback buttons
        function enableFeedbackButtons() {
            didntKnowBtn.disabled = false;
            hardBtn.disabled = false;
            knewItBtn.disabled = false;
        }
        
        // Event handlers
        
        // Flip card
        flashcard.addEventListener('click', function() {
            this.classList.toggle('flipped');
            sessionState.showingFront = !sessionState.showingFront;
            
            // Enable feedback buttons only when card is flipped to back
            if (!sessionState.showingFront) {
                enableFeedbackButtons();
            } else {
                disableFeedbackButtons();
            }
        });
        
        // Direction toggle
        targetToNativeBtn.addEventListener('click', function() {
            if (sessionState.practiceDirection !== 'target-to-native') {
                sessionState.practiceDirection = 'target-to-native';
                this.classList.add('active');
                nativeToTargetBtn.classList.remove('active');
                updateFlashcard();
            }
        });
        
        nativeToTargetBtn.addEventListener('click', function() {
            if (sessionState.practiceDirection !== 'native-to-target') {
                sessionState.practiceDirection = 'native-to-target';
                this.classList.add('active');
                targetToNativeBtn.classList.remove('active');
                updateFlashcard();
            }
        });
        
        // Feedback buttons
        didntKnowBtn.addEventListener('click', function() {
            recordFeedback('incorrect');
        });
        
        hardBtn.addEventListener('click', function() {
            recordFeedback('hard');
        });
        
        knewItBtn.addEventListener('click', function() {
            recordFeedback('correct');
        });
        
        // Skip button
        skipBtn.addEventListener('click', function() {
            nextCard();
        });
        
        // End session button
        endSessionBtn.addEventListener('click', function() {
            endSession();
        });
        
        // Shuffle button
        shuffleBtn.addEventListener('click', function() {
            // Fisher-Yates shuffle algorithm
            for (let i = vocabularyItems.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [vocabularyItems[i], vocabularyItems[j]] = [vocabularyItems[j], vocabularyItems[i]];
            }
            
            // Reset current index
            sessionState.currentIndex = 0;
            updateFlashcard();
        });
        
        // Filter beginner words
        filterBeginnerBtn.addEventListener('click', function() {
            // Save current word
            const currentWord = vocabularyItems[sessionState.currentIndex].word;
            
            // Filter to show only beginner words
            vocabularyItems = vocabularyItems.filter(item => item.mastery < 0.3);
            
            // If no items remain, add default
            if (vocabularyItems.length === 0) {
                vocabularyItems = [{
                    id: 0,
                    word: "No beginner words available",
                    translation: "Try changing the filter",
                    pronunciation: "",
                    partOfSpeech: "",
                    mastery: 0
                }];
            }
            
            // Try to find the same word or reset to beginning
            sessionState.currentIndex = vocabularyItems.findIndex(item => item.word === currentWord);
            if (sessionState.currentIndex === -1) sessionState.currentIndex = 0;
            
            updateFlashcard();
            updateProgress();
        });
        
        // Show all words
        filterAllBtn.addEventListener('click', function() {
            // Reload the page to get all words
            window.location.reload();
        });
        
        // Toggle hints
        toggleHintsBtn.addEventListener('click', function() {
            sessionState.showHints = !sessionState.showHints;
            if (sessionState.showHints) {
                frontHint.style.display = 'block';
            } else {
                frontHint.style.display = 'none';
            }
        });
        
        // Pronunciation buttons
        frontPronounceBtn.addEventListener('click', function(e) {
            e.stopPropagation(); // Prevent card flip
            const word = frontWord.textContent;
            
            // In a real implementation, this would call an API endpoint
            // to get and play the pronunciation audio
            console.log(`Playing pronunciation for: ${word}`);
            alert(`Playing pronunciation for: ${word}`);
        });
        
        backPronounceBtn.addEventListener('click', function(e) {
            e.stopPropagation(); // Prevent card flip
            const word = backWord.textContent;
            
            // In a real implementation, this would call an API endpoint
            // to get and play the pronunciation audio
            console.log(`Playing pronunciation for: ${word}`);
            alert(`Playing pronunciation for: ${word}`);
        });
        
        // Initialize the session
        initSession();
    });
</script>
{% endblock %}