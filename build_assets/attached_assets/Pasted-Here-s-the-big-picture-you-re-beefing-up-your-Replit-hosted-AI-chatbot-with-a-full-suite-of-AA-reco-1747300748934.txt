Here’s the big picture: you’re beefing up your Replit-hosted AI chatbot with a full suite of AA recovery tools—zero extra AI calls, maximum local logic and data, lean on your token budget. It plugs into the Meeting Guide API for live meet-search, embeds Big Book excerpts in-repo, schedules nightly and spot-check inventories, tracks your sober days and honesty admissions, and even flashes crisis help via SAMHSA—all stored in SQLite or JSON files, so the app hums along without pinging OpenRouter for each question.  ￼ ￼

Project Description

A modular FastAPI extension for your existing chatbot that:
	•	Serves AA content locally (Big Book text, nightly inventory, spot-checks)
	•	Integrates essential external APIs sparingly (Meeting Guide, SAMHSA helpline)
	•	Persists user logs in SQLite for sober-day & honesty-streak calculations
	•	Schedules reminders via in-app cron/jitter logic
	•	Keeps token usage minimal by using static question banks and rule-based responses

Features Breakdown

1. Meeting Finder & Auto-Join
	•	What it does: One-tap lookup of local/online AA meetings via the Meeting Guide API  ￼ ￼
	•	Step 10 twist: Pre-join “What snagged you since your last meeting?” prompt; post-meet reflection and “did you catch a misstep?” admit reminder.

2. Daily Reflections & Admit-Card
	•	What it does: Pushes a curated Big Book reflection or pledge each morning and pairs it with “Yesterday I noticed I…” journaling  ￼ ￼
	•	Nightly wrap-up: “Name one thing you cocked up today—no shame, just honesty.”

3. Big Book Text & Audio Library
	•	What it does: Local JSON of key Big Book passages plus optional audio hosted in-repo; searchable by keyword or chapter  ￼ ￼
	•	Interactive highlight: When a user reads “continue to take personal inventory…,” app pauses to log a voice-memo or text entry.

4. Sponsor Speed-Dial & Call-Log
	•	What it does: One-tap call/text to your sponsor or backup contact (no AI needed)
	•	Pre-call widget: “Own your latest slip or win—say it aloud.”
	•	Post-call log: “What did you admit to them?” stored in your inventory.

5. Recovery Stats & Honesty Streak
	•	What it does: Tracks days sober, meetings attended, money saved, calories avoided—plus “honesty entries” count from your nightly admits  ￼ ￼
	•	Alerts: “No honesty admits in 3 days? Time for a check-in.”

6. Guided Nightly Inventory & Journal
	•	What it does: Presents the classic 10th-Step template (resentful, selfish, dishonest, afraid, secrets, apologies, gratitude, surrender)  ￼ ￼
	•	Rapid-fire Step 10: Auto-asks “What did I do wrong? Who do I owe an apology to? How will I help someone tomorrow?”

7. Spot-Check Micro-Inventory
	•	What it does: Randomized in-day pings with one-question checks drawn from Big Book categories:
	1.	“Resentment Scan: Rate 0–5. Who or what sparked it?”
	2.	“Selfishness Check: Where did I put me first?”
	3.	“Dishonesty Pulse: Bend the truth? Three-word admit.”
	4.	“Fear Gauge: What frightened me today?”
	5.	“Anger Alert: Rate rage 0–5 and name the trigger.”
	6.	“Guilt Gauge: What am I regretting?”
	7.	“Amends Prompt: Did I harm anyone? Who needs sorry?”
	8.	“Service Reminder: Who can I help right now?”  ￼ ￼

8. Crisis SOS Button & Helpline
	•	What it does: Instant link to SAMHSA’s 24/7 National Helpline (1-800-662-HELP) or local “988” line  ￼ ￼
	•	Backup alert: Optionally ping sponsor/emergency contact.

9. CBT & Mindfulness Toolkit
	•	What it does: Static library of quick grounding, thought-record, urge-surfing, TIPP exercises stored in JSON.
	•	On-demand: User taps “Help me cope,” gets a 2-min breathing guide or self-soothe suggestion.

10. Habit Reminders & Motivational Nudges
	•	What it does: In-app scheduler (no AI) for meetings, prayers, self-care tasks.
	•	Motivation: Pulls from “Daily Reflections” bank or user-written mantras.  ￼

11. Gamification & Achievement Badges
	•	What it does: Awards badges for milestones—e.g., 30 days sober, 10 honesty admits, 5 meetings logged  ￼
	•	Dashboard: Displays earned badges and next targets.

12. Peer Support Forums
	•	What it does: Simple anonymous threads (Replit-hosted) for check-ins, wins, slip-stories.
	•	Mini-groups: Create “inventory buddies” for daily accountability.

Code Integration (FastAPI + SQLite)

# app.py
from fastapi import FastAPI, HTTPException
from pydantic import BaseModel
import sqlite3, json, random, datetime, requests

app = FastAPI(title="AA Recovery Module")

# ——— DB SETUP ———
conn = sqlite3.connect("aa_recovery.db", check_same_thread=False)
c = conn.cursor()
c.executescript("""
CREATE TABLE IF NOT EXISTS logs (
  id INTEGER PRIMARY KEY,
  user_id TEXT,
  feature TEXT,
  content TEXT,
  timestamp DATETIME DEFAULT CURRENT_TIMESTAMP
);
""")
conn.commit()

# ——— STATIC RESOURCES ———
with open("big_book.json") as f: BIG_BOOK = json.load(f)
with open("reflections.json") as f: REFLECTIONS = json.load(f)
with open("mindfulness.json") as f: MINDFULNESS = json.load(f)
SPOT_CHECK_QUESTIONS = [
  {"key":"resentment","q":"Resentment Scan (0–5). Trigger?"},
  {"key":"selfish","q":"Selfishness Check: Where did I put me first?"},
  {"key":"dishonesty","q":"Dishonesty Pulse: Bend the truth? 3-word admit."},
  {"key":"fear","q":"Fear Gauge: What frightened me today?"},
  {"key":"anger","q":"Anger Alert (0–5). Trigger?"},
  {"key":"guilt","q":"Guilt Gauge: What am I regretting?"},
  {"key":"amends","q":"Amends Prompt: Did I harm anyone? Who needs sorry?"},
  {"key":"service","q":"Service Reminder: Who can I help now?"}
]

# ——— MODELS ———
class User(BaseModel):
    user_id: str

class Entry(BaseModel):
    user_id: str
    feature: str
    content: str

# ——— HELPERS ———
def log_entry(user_id, feature, content):
    c.execute("INSERT INTO logs(user_id,feature,content) VALUES (?,?,?)",
              (user_id, feature, content))
    conn.commit()

# ——— ENDPOINTS ———

@app.get("/meetings/{zip_code}")
def find_meetings(zip_code: str, user: User):
    # Meeting Guide API spec endpoint
    resp = requests.get(
      "https://api.meetingguide.org/v1/meetings",
      params={"postal_code": zip_code}
    )
    data = resp.json().get("meetings", [])
    # Pre-join inventory prompt logged client-side
    return {"meetings": data}

@app.get("/reflection/today")
def get_reflection(user: User):
    r = random.choice(REFLECTIONS["morning"])
    return {"reflection": r}

@app.post("/reflection/log")
def log_reflection(entry: Entry):
    log_entry(entry.user_id, entry.feature, entry.content)
    return {"status": "logged"}

@app.get("/bigbook/{chapter}")
def big_book(chapter: int):
    return {"text": BIG_BOOK.get(str(chapter), "")}

@app.post("/sponsor/call")
def sponsor_call(user: User):
    # Client handles actual call; this logs the intent
    log_entry(user.user_id, "sponsor_call", "User initiated sponsor call")
    return {"prompt":"Own your latest slip or win before dialing."}

@app.get("/stats/{user_id}")
def stats(user_id: str):
    # Calculate days sober & honesty admits
    c.execute("SELECT MIN(timestamp) FROM logs WHERE user_id=? AND feature='sober_start'",(user_id,))
    start = c.fetchone()[0] or datetime.datetime.now().isoformat()
    days = (datetime.datetime.now() - datetime.datetime.fromisoformat(start)).days
    c.execute("SELECT COUNT(*) FROM logs WHERE user_id=? AND feature='nightly_admit'",(user_id,))
    admits = c.fetchone()[0]
    return {"days_sober": days, "honesty_admits": admits}

@app.get("/inventory/nightly")
def nightly_inventory(user: User):
    template = [
      "Resentful?",
      "Selfish?",
      "Dishonest?",
      "Afraid?",
      "Secrets?",
      "Apologies?",
      "Gratitude?",
      "Surrender?"
    ]
    return {"questions": template}

@app.post("/inventory/log")
def log_inventory(entry: Entry):
    log_entry(entry.user_id, entry.feature, entry.content)
    return {"status":"inventory logged"}

@app.get("/spotcheck")
def spot_check(user: User):
    q = random.choice(SPOT_CHECK_QUESTIONS)
    return {"question": q["q"], "key": q["key"]}

@app.post("/spotcheck/log")
def log_spot(entry: Entry):
    log_entry(entry.user_id, entry.feature, entry.content)
    return {"status":"spot logged"}

@app.get("/sos")
def sos():
    return {"help":"If you or someone you know is in crisis, call 1-800-662-HELP (4357) or dial 988"}  # SAMHSA  [oai_citation:18‡SAMHSA](https://www.samhsa.gov/find-help/helplines/national-helpline?utm_source=chatgpt.com) [oai_citation:19‡SAMHSA](https://www.samhsa.gov/find-support/in-crisis?utm_source=chatgpt.com)

@app.get("/mindfulness")
def mindfulness():
    return {"exercises": MINDFULNESS["tipp"]}

@app.get("/reminders")
def reminders(user: User):
    # Stub: client schedules local notifications based on stored preferences
    return {"reminders":"Your habit reminders are loaded"}

@app.get("/badges/{user_id}")
def badges(user_id: str):
    # Stub: compute badges from logs
    return {"badges":["30 days sober","5 nightly admits"]}

@app.get("/forums")
def forums():
    return {"forums_url":"https://replit.com/@yourteam/aa-forums"}

File structure

/app.py
/big_book.json        # chapters keyed by number
/reflections.json     # { "morning": [...], "evening": [...] }
/mindfulness.json     # { "tipp": [...], ... }
-aa_recovery.db       # SQLite store

With this in place, your AA toolkit lives in-repo—no extraneous LLM calls, tokens stay safe, and users get a full Step 10 companion right in your chatbot.