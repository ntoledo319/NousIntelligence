{% extends "layout.html" %}

{% block title %}Analyze Meeting Notes{% endblock %}

{% block content %}
<div class="container my-4">
    <div class="row">
        <div class="col-12">
            <h1 class="mb-4">Analyze Meeting Notes</h1>
            <p class="lead">Extract key insights, action items, and summaries from your meeting notes using AI.</p>
            
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{{ url_for('meet.dashboard') }}">Meet Dashboard</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Analyze Notes</li>
                </ol>
            </nav>
        </div>
    </div>
    
    <div class="row mt-4">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">Meeting Notes Analysis</h5>
                </div>
                <div class="card-body">
                    <form method="POST" action="{{ url_for('meet.analyze_notes') }}">
                        <div class="mb-3">
                            <label for="meeting_type" class="form-label">Meeting Type *</label>
                            <select class="form-select" id="meeting_type" name="meeting_type" required>
                                <option value="general">General Meeting</option>
                                <option value="therapy">Therapy Session</option>
                                <option value="recovery">Recovery Group</option>
                                <option value="sponsor">Sponsor Meeting</option>
                                <option value="mindfulness">Mindfulness Session</option>
                            </select>
                            <div class="form-text">The type of meeting these notes are from</div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="notes_text" class="form-label">Meeting Notes *</label>
                            <textarea class="form-control" id="notes_text" name="notes_text" rows="12" required placeholder="Paste your meeting notes here..."></textarea>
                            <div class="form-text">
                                For best results, include as much detail as possible from the meeting
                            </div>
                        </div>
                        
                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <a href="{{ url_for('meet.dashboard') }}" class="btn btn-outline-secondary">Cancel</a>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-magic me-1"></i> Analyze Notes
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="card-title mb-0">About Notes Analysis</h5>
                </div>
                <div class="card-body">
                    <p>Meeting notes analysis uses AI to:</p>
                    <ul>
                        <li>Extract key discussion points</li>
                        <li>Identify action items and assignments</li>
                        <li>Organize decisions that were made</li>
                        <li>Highlight important insights</li>
                        <li>Organize follow-up items</li>
                    </ul>
                    
                    <div class="alert alert-info mt-3">
                        <i class="fas fa-info-circle me-2"></i> The analysis is tailored based on the type of meeting you select.
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">Tips for Good Notes</h5>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <i class="fas fa-check-circle text-success me-2"></i>
                            <strong>Be specific</strong> about decisions made
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-check-circle text-success me-2"></i>
                            <strong>Include who said what</strong> for important points
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-check-circle text-success me-2"></i>
                            <strong>Note action items</strong> with assigned owners
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-check-circle text-success me-2"></i>
                            <strong>Capture key questions</strong> raised during the meeting
                        </li>
                        <li>
                            <i class="fas fa-check-circle text-success me-2"></i>
                            <strong>Document outcomes</strong> of any discussions
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const meetingTypeSelect = document.getElementById('meeting_type');
        const notesTextarea = document.getElementById('notes_text');
        
        // Provide example placeholder based on meeting type selection
        meetingTypeSelect.addEventListener('change', function() {
            const meetingType = this.value;
            let placeholder = "Paste your meeting notes here...";
            
            if (meetingType === 'therapy') {
                placeholder = "Therapy Session Notes Example:\n\nClient: Jane D.\nDate: October 15, 2023\n\nCheck-in: Client reported feeling anxious about upcoming job interview.\n\nThemes discussed:\n- Work-related anxiety\n- Coping strategies for stress\n- Progress on exposure exercises\n\nClient noted improvement in sleep patterns after implementing bedtime routine.\n\nHomework assigned: Continue daily meditation practice and complete thought records when anxiety peaks.\n\nNext session scheduled for October 22.";
            } else if (meetingType === 'recovery') {
                placeholder = "Recovery Group Meeting Notes Example:\n\nDate: October 16, 2023\nAttendees: 8 members present\n\nOpening: Read Serenity Prayer and daily reflection\n\nCheck-ins:\n- Bob shared 30-day milestone\n- Lisa discussed challenge with family gathering\n- Mark brought up difficult workplace situation\n\nTopic: Dealing with triggers during holidays\n\nKey shares:\n- Several members offered strategies for navigating social events\n- Discussion of creating exit plans for uncomfortable situations\n- Resources for additional support were shared\n\nClosing: Gratitude expressions and confirmation of next meeting date";
            } else if (meetingType === 'sponsor') {
                placeholder = "Sponsor Meeting Notes Example:\n\nDate: October 17, 2023\n\nStep work review:\n- Completed step 4 inventory sections on childhood and work relationships\n- Discussed patterns observed in relationships\n\nChallenges since last meeting:\n- Difficult situation at family dinner\n- Successfully navigated without relapse\n- Used tools discussed in previous meeting\n\nQuestions discussed:\n- How to approach amends with estranged relative\n- Working through resentment with former colleague\n\nAction items for next week:\n- Continue step 4 inventory\n- Practice daily readings\n- Attend two meetings";
            }
            
            notesTextarea.placeholder = placeholder;
        });
    });
</script>
{% endblock %} 